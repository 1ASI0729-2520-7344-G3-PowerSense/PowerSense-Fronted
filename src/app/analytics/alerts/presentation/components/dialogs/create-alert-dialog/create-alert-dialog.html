<h2 mat-dialog-title>
    <mat-icon>add_alert</mat-icon>
    Crear Nueva Alerta
</h2>

<mat-dialog-content>
    <div class="form-grid">
        <!-- Tipo de Alerta -->
        <mat-form-field appearance="outline">
            <mat-label>Tipo de Alerta</mat-label>
            <mat-select [(ngModel)]="selectedType" required>
                @for (type of types; track type.value) {
                <mat-option [value]="type.value">{{ type.label }}</mat-option>
                }
            </mat-select>
            <mat-icon matPrefix>category</mat-icon>
        </mat-form-field>

        <!-- Severidad -->
        <mat-form-field appearance="outline">
            <mat-label>Severidad</mat-label>
            <mat-select [(ngModel)]="selectedSeverity" required>
                @for (severity of severities; track severity.value) {
                <mat-option [value]="severity.value">{{ severity.label }}</mat-option>
                }
            </mat-select>
            <mat-icon matPrefix>priority_high</mat-icon>
        </mat-form-field>

        <!-- ID de Dispositivo (Opcional) -->
        <mat-form-field appearance="outline">
            <mat-label>ID de Dispositivo (Opcional)</mat-label>
            <input matInput [(ngModel)]="deviceId" placeholder="device-001">
            <mat-icon matPrefix>devices</mat-icon>
        </mat-form-field>

        <!-- Umbral (Opcional) -->
        <mat-form-field appearance="outline">
            <mat-label>Umbral en Watts (Opcional)</mat-label>
            <input matInput type="number" [(ngModel)]="threshold" placeholder="1000">
            <mat-icon matPrefix>speed</mat-icon>
            <span matSuffix>W</span>
        </mat-form-field>

        <!-- Mensaje -->
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Mensaje</mat-label>
            <textarea matInput [(ngModel)]="message" rows="4" maxlength="500" placeholder="Describe la alerta..."
                required>
      </textarea>
            <mat-icon matPrefix>message</mat-icon>
            <mat-hint align="end">{{ message.length }} / 500</mat-hint>
        </mat-form-field>
    </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">
        Cancelar
    </button>
    <button mat-raised-button color="primary" (click)="onCreate()" [disabled]="!isValid()">
        <mat-icon>add</mat-icon>
        Crear Alerta
    </button>
</mat-dialog-actions>